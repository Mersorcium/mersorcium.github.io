<div class="section">
    <h1 class="section-title underline">News</h1>
    <p class="seminar-title"><span class="newstype">Online Seminar</span> Unveiling the role of phytoplankton species in mercury cycling transformations</p>
    <p><span class="newstype">Speaker:</span> JoÃ£o Santos</p>

    <!-- ðŸ•’ Seminar Time (local) -->
    <div class="seminar-time-box">
        <strong>ðŸ•’ Seminar Time:</strong>
        <div id="seminar-time">Loading local time...</div>
        <small style="color: gray;">Automatically converted to your local timezone</small>
        <!-- ðŸ“… Add to Calendar Buttons -->
        <div class="calendar-buttons" style="margin-top: 1em;">
            <a id="gcal-link" class="calendar-button small-button google-btn" target="_blank"><i class="calendar-icon google-icon"></i> Google Calendar</a>
            <a id="ics-download" class="calendar-button small-button outlook-btn" download="seminar.ics"><i class="calendar-icon outlook-icon"></i> Outlook / iCal</a>
        </div>
    </div>



    <!-- <a href="https://youtu.be/16cejGujTSA">&raquo; View history recording in Mersorcium YouTube Channel</a> -->
    <img src="{{ "/posters/Seminar-20250602-Joao_Santos.jpg" | relative_url }}" alt="poster" />
    <a href="https://umu.zoom.us/j/67699665745">&raquo; Click here to enter the zoom meeting</a>
</div>


<!-- ðŸ’¡ Local time conversion script -->
<script>
  // Wait for DOM to fully load
  document.addEventListener('DOMContentLoaded', function() {
    try {
      const utcTime = '2025-06-02T14:00:00Z'; // UTC time of the seminar
      const userTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;
      const localDate = new Date(utcTime);

      const formatted = localDate.toLocaleString('en-US', {
        timeZone: userTimeZone,
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        hour12: false
      });

      document.getElementById('seminar-time').textContent = `${formatted} (${userTimeZone})`;
    } catch (error) {
      console.error("Error in time conversion:", error);
    }
  });
</script>

<script>
  // Wait for DOM to fully load
  document.addEventListener('DOMContentLoaded', function() {
    try {
      // Seminar details
      const title = 'Online Seminar: Unveiling the role of phytoplankton species in mercury cycling transformations';
      const location = 'Zoom: https://umu.zoom.us/j/67699665745';
      const description = 'Speaker: JoÃ£o Santos\\nJoin via Zoom: https://umu.zoom.us/j/67699665745';
      
      const startUtc = new Date('2025-06-02T14:00:00Z'); // Using same UTC time as display
      const endUtc = new Date(startUtc.getTime() + 60 * 60 * 1000); // +1 hour

      // Format for Google Calendar link
      const formatDateForGCal = (date) => {
        return date.toISOString().replace(/[-:]|\.\d{3}/g, '');
      };

      const gcalLink = `https://www.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(title)}&dates=${formatDateForGCal(startUtc)}/${formatDateForGCal(endUtc)}&details=${encodeURIComponent(description)}&location=${encodeURIComponent(location)}&sf=true&output=xml`;
      
      const gcalButton = document.getElementById('gcal-link');
      if (gcalButton) {
        gcalButton.href = gcalLink;
        console.log("Google Calendar link set:", gcalLink);
      } else {
        console.error("Google Calendar button not found!");
      }

      // Format for .ics file
      const pad = (num) => String(num).padStart(2, '0');
      const formatICSDate = (d) => {
        return `${d.getUTCFullYear()}${pad(d.getUTCMonth() + 1)}${pad(d.getUTCDate())}T${pad(d.getUTCHours())}${pad(d.getUTCMinutes())}00Z`;
      };

      const icsContent = `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Your Site//EN
BEGIN:VEVENT
UID:${Date.now()}@yourdomain.com
DTSTAMP:${formatICSDate(new Date())}
DTSTART:${formatICSDate(startUtc)}
DTEND:${formatICSDate(endUtc)}
SUMMARY:${title}
DESCRIPTION:${description}
LOCATION:${location}
END:VEVENT
END:VCALENDAR`;

      const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
      const icsURL = URL.createObjectURL(blob);
      
      const icsButton = document.getElementById('ics-download');
      if (icsButton) {
        icsButton.href = icsURL;
        console.log("ICS download link created");
      } else {
        console.error("ICS download button not found!");
      }
    } catch (error) {
      console.error("Error setting up calendar links:", error);
    }
  });
</script>

<!-- âœ¨ Optional minimal styling -->
<style>
  .seminar-time-box {
    background-color: #f3f4f6;
    border-left: 4px solid #3b82f6;
    padding: 1em;
    margin: 1em 0;
    font-family: system-ui, sans-serif;
    border-radius: 6px;
  }
  .calendar-button {
    display: inline-block;
    background-color: #718ece;
    color: white;
    padding: 0.4em 0.8em;
    margin-right: 0.5em;
    text-decoration: none;
    border-radius: 5px;
    font-size: 0.9em;
    transition: background-color 0.2s ease;
  }
  .calendar-button:hover {
    background-color: #4660b6;
  }
  
  /* New button styles */
  .small-button {
    padding: 0.25em 0.6em;
    font-size: 0.85em;
  }
  
  .calendar-icon {
    display: inline-block;
    width: 16px;
    height: 16px;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    margin-right: 4px;
    vertical-align: text-bottom;
  }
  
  .google-btn {
    background-color: #4285F4;
  }
  
  .google-btn:hover {
    background-color: #3367D6;
  }
  
  .outlook-btn {
    background-color: #0078D4;
  }
  
  .outlook-btn:hover {
    background-color: #106EBE;
  }
  
  .google-icon {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23fff' d='M32.582 370.734C15.127 336.291 5.12 297.425 5.12 256c0-41.426 10.007-80.291 27.462-114.735C74.705 57.484 161.047 0 261.12 0c69.12 0 126.836 25.367 171.287 66.793l-73.31 73.309c-26.763-25.135-60.276-38.168-97.977-38.168-66.56 0-123.113 44.917-143.36 105.426-5.12 15.36-8.146 31.65-8.146 48.64 0 16.989 3.026 33.28 8.146 48.64l-.303.232h.303c20.247 60.51 76.8 105.426 143.36 105.426 34.443 0 63.534-9.31 86.341-24.67 27.23-18.152 45.382-45.148 51.433-77.032H261.12v-99.142h241.105c3.025 16.757 4.654 34.211 4.654 52.364 0 77.963-27.927 143.592-76.334 188.276-42.356 39.098-100.305 61.905-169.425 61.905-100.073 0-186.415-57.483-228.538-141.032v-.233z'%3E%3C/path%3E%3C/svg%3E");
  }
  
  .outlook-icon {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23fff' d='M20.13,32.5c-2.79,-1.69 -4.53,-4.77 -4.53,-8.04v-15.56c0,-1.63 0.39,-3.19 1.11,-4.57l-9.17,5.55c-2.8,1.69 -4.54,4.77 -4.54,8.04v14.15c0,1.59 0.42,3.14 1.16,4.5c0.69,1.12 1.67,2.06 2.88,2.74c2.53,1.42 5.51,1.36 7.98,-0.15l8.02,-4.9zM42.84,27.14l-8.44,-5.05v2.29c0,3.25 -1.72,6.33 -4.49,8.02l-13.84,8.47c-1.52,0.93 -3.19,1.42 -4.87,1.46l8.93,5.41c1.5,0.91 3.19,1.36 4.87,1.36c1.68,0 3.37,-0.45 4.87,-1.36l9.08,-5.5l3.52,-2.13c0.27,-0.16 0.53,-0.34 0.78,-0.54c0.08,-0.05 0.16,-0.11 0.23,-0.16c0.65,-0.53 1.23,-1.13 1.71,-1.79c0.02,-0.03 0.04,-0.06 0.06,-0.09c0.77,-1.19 1.2,-2.59 1.19,-4.06c-0.01,-2.62 -1.35,-4.99 -3.6,-6.33zM42.46,9.88l-9.57,-5.79l-3.02,-1.83c-0.42,-0.26 -0.86,-0.47 -1.31,-0.65c-0.49,-0.21 -1,-0.37 -1.51,-0.47c-1.84,-0.38 -3.76,-0.08 -5.46,0.89c-2.5,1.43 -3.99,3.99 -3.99,6.87v9.6l2.8,-1.65c2.84,-1.67 6.36,-1.66 9.19,0.03l14.28,8.54c1.29,0.78 2.35,1.81 3.12,3.02l0.01,-10.52c0,-3.27 -1.74,-6.35 -4.54,-8.04z'%3E%3C/path%3E%3C/svg%3E");
  }
</style>
