<div class="section">
    <h1 class="section-title underline">News</h1>
    <p class="seminar-title"><span class="newstype">Online Seminar</span> Unveiling the role of phytoplankton species in mercury cycling transformations</p>
    <p><span class="newstype">Speaker:</span> JoÃ£o Santos</p>

    <!-- ðŸ•’ Seminar Time (local) -->
    <div class="seminar-time-box">
        <strong>ðŸ•’ Seminar Time:</strong>
        <div id="seminar-time">Loading local time...</div>
        <small style="color: gray;">Automatically converted to your local timezone</small>
        <!-- ðŸ“… Add to Calendar Buttons -->
        <div class="calendar-buttons" style="margin-top: 1em;">
            <a id="gcal-link" class="calendar-button small-button google-btn" target="_blank"><i class="calendar-icon google-icon"></i> Google Calendar</a>
            <a id="ics-download" class="calendar-button small-button outlook-btn" download="seminar.ics"><i class="calendar-icon outlook-icon"></i> Outlook / iCal</a>
        </div>
    </div>



    <!-- <a href="https://youtu.be/16cejGujTSA">&raquo; View history recording in Mersorcium YouTube Channel</a> -->
    <img src="{{ "/posters/Seminar-20250602-Joao_Santos.jpg" | relative_url }}" alt="poster" />
    <a href="https://umu.zoom.us/j/67699665745">&raquo; Click here to enter the zoom meeting</a>
</div>


<!-- ðŸ’¡ Local time conversion script -->
<script>
  // Wait for DOM to fully load
  document.addEventListener('DOMContentLoaded', function() {
    try {
      const utcTime = '2025-06-02T14:00:00Z'; // UTC time of the seminar
      const userTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;
      const localDate = new Date(utcTime);

      const formatted = localDate.toLocaleString('en-US', {
        timeZone: userTimeZone,
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        hour12: false
      });

      document.getElementById('seminar-time').textContent = `${formatted} (${userTimeZone})`;
    } catch (error) {
      console.error("Error in time conversion:", error);
    }
  });
</script>

<script>
  // Wait for DOM to fully load
  document.addEventListener('DOMContentLoaded', function() {
    try {
      // Seminar details
      const title = 'Online Seminar: Unveiling the role of phytoplankton species in mercury cycling transformations';
      const location = 'Zoom: https://umu.zoom.us/j/67699665745';
      const description = 'Speaker: JoÃ£o Santos\\nJoin via Zoom: https://umu.zoom.us/j/67699665745';
      
      const startUtc = new Date('2025-06-02T14:00:00Z'); // Using same UTC time as display
      const endUtc = new Date(startUtc.getTime() + 60 * 60 * 1000); // +1 hour

      // Format for Google Calendar link
      const formatDateForGCal = (date) => {
        return date.toISOString().replace(/[-:]|\.\d{3}/g, '');
      };

      const gcalLink = `https://www.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(title)}&dates=${formatDateForGCal(startUtc)}/${formatDateForGCal(endUtc)}&details=${encodeURIComponent(description)}&location=${encodeURIComponent(location)}&sf=true&output=xml`;
      
      const gcalButton = document.getElementById('gcal-link');
      if (gcalButton) {
        gcalButton.href = gcalLink;
        console.log("Google Calendar link set:", gcalLink);
      } else {
        console.error("Google Calendar button not found!");
      }

      // Format for .ics file
      const pad = (num) => String(num).padStart(2, '0');
      const formatICSDate = (d) => {
        return `${d.getUTCFullYear()}${pad(d.getUTCMonth() + 1)}${pad(d.getUTCDate())}T${pad(d.getUTCHours())}${pad(d.getUTCMinutes())}00Z`;
      };

      const icsContent = `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Your Site//EN
BEGIN:VEVENT
UID:${Date.now()}@yourdomain.com
DTSTAMP:${formatICSDate(new Date())}
DTSTART:${formatICSDate(startUtc)}
DTEND:${formatICSDate(endUtc)}
SUMMARY:${title}
DESCRIPTION:${description}
LOCATION:${location}
END:VEVENT
END:VCALENDAR`;

      const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
      const icsURL = URL.createObjectURL(blob);
      
      const icsButton = document.getElementById('ics-download');
      if (icsButton) {
        icsButton.href = icsURL;
        console.log("ICS download link created");
      } else {
        console.error("ICS download button not found!");
      }
    } catch (error) {
      console.error("Error setting up calendar links:", error);
    }
  });
</script>

<!-- âœ¨ Optional minimal styling -->
<style>
  .seminar-time-box {
    background-color: #f3f4f6;
    border-left: 4px solid #3b82f6;
    padding: 1em;
    margin: 1em 0;
    font-family: system-ui, sans-serif;
    border-radius: 6px;
  }
  .calendar-button {
    display: inline-block;
    background-color: #718ece;
    color: white;
    padding: 0.4em 0.8em;
    margin-right: 0.5em;
    text-decoration: none;
    border-radius: 5px;
    font-size: 0.9em;
    transition: background-color 0.2s ease;
  }
  .calendar-button:hover {
    background-color: #4660b6;
  }
  
  /* New button styles */
  .small-button {
    padding: 0.25em 0.6em;
    font-size: 0.85em;
  }
  
  .calendar-icon {
    display: inline-block;
    width: 16px;
    height: 16px;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    margin-right: 4px;
    vertical-align: text-bottom;
  }
  
  .google-btn {
    background-color: #4285F4;
  }
  
  .google-btn:hover {
    background-color: #3367D6;
  }
  
  .outlook-btn {
    background-color: #0078D4;
  }
  
  .outlook-btn:hover {
    background-color: #106EBE;
  }
  
  .google-icon {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23fff' d='M21.5,10.5h-8.5v3.5h4.86c-0.64,3-3.03,4-5.36,4c-3.31,0-6-2.69-6-6s2.69-6,6-6c1.42,0,2.77,0.5,3.83,1.39l2.76-2.76C17.14,2.92,14.43,2,11.5,2C6.25,2,2,6.25,2,11.5S6.25,21,11.5,21c4.14,0,8.5-3,8.5-8.5C20,11.83,21.5,10.5,21.5,10.5z'%3E%3C/path%3E%3C/svg%3E");
  }
  
  .outlook-icon {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23fff' d='M7.88,12.04c0,1.28-0.64,2.46-1.68,3.17v0.21c1.04,0.71,1.68,1.89,1.68,3.17c0,2.21-1.79,4-4,4H2V8.04h1.88 C6.09,8.04,7.88,9.83,7.88,12.04z M4.5,10.29c0-0.19-0.15-0.34-0.34-0.34H3.5v1.38h0.66c0.19,0,0.34-0.16,0.34-0.34V10.29z M3.5,15.29v1.38h0.66c0.19,0,0.34-0.16,0.34-0.34v-0.71c0-0.19-0.15-0.34-0.34-0.34H3.5z M13.46,12L7.88,8.79v6.43L13.46,12z M21.54,9.04h-4v12h4c0.55,0,1-0.45,1-1V10.04C22.54,9.49,22.09,9.04,21.54,9.04z M20.54,18.29h-2v-7.25h2V18.29z'%3E%3C/path%3E%3C/svg%3E");
  }
</style>